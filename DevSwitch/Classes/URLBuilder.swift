//
//  URLBuilder.swift
//  DevSwitch
//
//  Created by Aaron Pearce on 27/02/19.
//  Copyright Â© 2019 Aaron Pearce. All rights reserved.
//

import Foundation

class URLBuilder {
    static let dsf = [
        "cn": "143465",
        "us": "143441",
        "jp": "143462",
        "kr": "143466",
        "tw": "143470",
        "hk": "143463",
        "ae": "143481",
        "om": "143562",
        "az": "143568",
        "pk": "143477",
        "bh": "143559",
        "bt": "143577",
        "ph": "143474",
        "kz": "143517",
        "kg": "143586",
        "kh": "143579",
        "qa": "143498",
        "kw": "143493",
        "la": "143587",
        "lb": "143497",
        "my": "143473",
        "mn": "143592",
        "np": "143484",
        "sa": "143479",
        "lk": "143486",
        "tj": "143603",
        "th": "143475",
        "tr": "143480",
        "tm": "143604",
        "bn": "143560",
        "uz": "143566",
        "sg": "143464",
        "am": "143524",
        "ye": "143571",
        "il": "143491",
        "in": "143467",
        "id": "143476",
        "jo": "143528",
        "vn": "143471",
        "mo": "143515",
        "al": "143575",
        "ie": "143449",
        "ee": "143518",
        "at": "143445",
        "by": "143565",
        "bg": "143526",
        "mk": "143530",
        "be": "143446",
        "is": "143558",
        "pl": "143478",
        "dk": "143458",
        "de": "143443",
        "ru": "143469",
        "fr": "143442",
        "fi": "143447",
        "nl": "143452",
        "cz": "143489",
        "hr": "143494",
        "lv": "143519",
        "lt": "143520",
        "lu": "143451",
        "ro": "143487",
        "mt": "143521",
        "md": "143523",
        "no": "143457",
        "pt": "143453",
        "se": "143456",
        "ch": "143459",
        "sl": "143600",
        "sk": "143496",
        "si": "143499",
        "ua": "143492",
        "es": "143454",
        "gr": "143448",
        "hu": "143482",
        "it": "143450",
        "gb": "143444",
        "ai": "143538",
        "ag": "143540",
        "bb": "143541",
        "bs": "143539",
        "pa": "143485",
        "bm": "143542",
        "bz": "143555",
        "do": "143508",
        "dm": "143545",
        "cr": "143495",
        "gd": "143546",
        "hn": "143510",
        "ca": "143455",
        "ky": "143544",
        "ms": "143547",
        "mx": "143468",
        "ni": "143512",
        "sv": "143506",
        "kn": "143548",
        "lc": "143549",
        "vc": "143550",
        "tc": "143552",
        "tt": "143551",
        "gt": "143504",
        "jm": "143511",
        "vg": "143543",
        "ar": "143505",
        "py": "143513",
        "br": "143503",
        "bo": "143556",
        "ec": "143509",
        "co": "143501",
        "gy": "143553",
        "pe": "143507",
        "sr": "143554",
        "ve": "143502",
        "uy": "143514",
        "cl": "143483",
        "au": "143460",
        "pg": "143597",
        "fj": "143583",
        "fm": "143591",
        "pw": "143595",
        "sb": "143601",
        "nz": "143461",
        "dz": "143563",
        "eg": "143516",
        "ao": "143564",
        "bj": "143576",
        "bw": "143525",
        "bf": "143578",
        "cv": "143580",
        "gm": "143584",
        "cg": "143582",
        "gw": "143585",
        "gh": "143573",
        "zw": "143605",
        "ke": "143529",
        "lr": "143588",
        "mg": "143531",
        "mw": "143589",
        "ml": "143532",
        "mu": "143533",
        "mr": "143590",
        "mz": "143593",
        "na": "143594",
        "za": "143472",
        "ne": "143534",
        "ng": "143561",
        "sn": "143535",
        "cy": "143557",
        "sc": "143599",
        "st": "143598",
        "sz": "143602",
        "tz": "143572",
        "tn": "143536",
        "ug": "143537",
        "td": "143581"
    ]
    
    static func url(for code: String) -> URL? {
        guard let dsf = URLBuilder.dsfMap(for: code) else {
            return nil
        }
        
        let urlString = "https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=\(dsf)&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=\(code)&urlDesc="
        
        return URL(string: urlString)
    }
    
    static func url(forApp appIdentifier: Int) -> URL? {
        let urlString = "https://itunes.apple.com/app/id\(appIdentifier)"
        
        return URL(string: urlString)
    }
    
    static func dsfMap(for code: String) -> String? {
        return URLBuilder.dsf[code]
    }
}
